{"version":3,"file":"textureSampleCompareLevel.spec.js","names":["description","makeTestGroup","kCompareFunctions","isDepthTextureFormat","isEncodableTextureFormat","kDepthStencilFormats","kShaderStages","checkCallResults","chooseTextureSize","createTextureWithRandomDataAndGetTexels","doTextureCalls","generateSamplePointsCube","generateTextureBuiltinInputs2D","kCubeSamplePointMethods","kSamplePointMethods","makeRandomDepthComparisonTexelGenerator","WGSLTextureSampleTest","g","test","specURL","desc","params","u","combine","filter","t","format","beginSubcases","fn","stage","samplePoints","addressModeU","addressModeV","minFilter","compare","offset","size","minSize","minBlocks","descriptor","usage","GPUTextureUsage","COPY_DST","TEXTURE_BINDING","mipLevelCount","texels","texture","generator","sampler","magFilter","mipmapFilter","calls","method","textureBuiltin","derivatives","depthRef","hashInputs","map","coords","derivativeMult","arrayIndex","builtin","coordType","textureType","viewDescriptor","results","res","expectOK","addressMode","viewDimension","isCompatibility","textureBindingViewDimension","addressModeW","dimension","beforeAllSubcases","skipIfTextureFormatNotSupported","A","num","depthOrArrayLayers","type","arrayIndexType","skipIfTextureViewDimensionNotSupported"],"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/textureSampleCompareLevel.spec.ts"],"sourcesContent":["export const description = `\nSamples a depth texture and compares the sampled depth values against a reference value.\n\nThe textureSampleCompareLevel function is the same as textureSampleCompare, except that:\n\n * textureSampleCompareLevel always samples texels from mip level 0.\n   * The function does not compute derivatives.\n   * There is no requirement for textureSampleCompareLevel to be invoked in uniform control flow.\n * textureSampleCompareLevel may be invoked in any shader stage.\n\n- TODO: test un-encodable formats.\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { kCompareFunctions } from '../../../../../capability_info.js';\nimport {\n  isDepthTextureFormat,\n  isEncodableTextureFormat,\n  kDepthStencilFormats,\n} from '../../../../../format_info.js';\nimport { kShaderStages } from '../../../../validation/decl/util.js';\n\nimport {\n  checkCallResults,\n  chooseTextureSize,\n  createTextureWithRandomDataAndGetTexels,\n  doTextureCalls,\n  generateSamplePointsCube,\n  generateTextureBuiltinInputs2D,\n  kCubeSamplePointMethods,\n  kSamplePointMethods,\n  makeRandomDepthComparisonTexelGenerator,\n  TextureCall,\n  vec2,\n  vec3,\n  WGSLTextureSampleTest,\n} from './texture_utils.js';\n\nexport const g = makeTestGroup(WGSLTextureSampleTest);\n\ng.test('2d_coords')\n  .specURL('https://www.w3.org/TR/WGSL/#texturesamplecomparelevel')\n  .desc(\n    `\nfn textureSampleCompareLevel(t: texture_depth_2d, s: sampler_comparison, coords: vec2<f32>, depth_ref: f32) -> f32\nfn textureSampleCompareLevel(t: texture_depth_2d, s: sampler_comparison, coords: vec2<f32>, depth_ref: f32, offset: vec2<i32>) -> f32\n\nParameters:\n * t  The depth texture to sample.\n * s  The sampler_comparison type.\n * coords The texture coordinates used for sampling.\n * depth_ref The reference value to compare the sampled depth value against.\n * offset\n    * The optional texel offset applied to the unnormalized texture coordinate before sampling the texture.\n    * This offset is applied before applying any texture wrapping modes.\n    * The offset expression must be a creation-time expression (e.g. vec2<i32>(1, 2)).\n    * Each offset component must be at least -8 and at most 7.\n      Values outside of this range will result in a shader-creation error.\n`\n  )\n  .params(u =>\n    u\n      .combine('stage', kShaderStages)\n      .combine('format', kDepthStencilFormats)\n      // filter out stencil only formats\n      .filter(t => isDepthTextureFormat(t.format))\n      // MAINTENANCE_TODO: Remove when support for depth24plus, depth24plus-stencil8, and depth32float-stencil8 is added.\n      .filter(t => isEncodableTextureFormat(t.format))\n      .combine('minFilter', ['nearest', 'linear'] as const)\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('addressModeU', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('addressModeV', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('compare', kCompareFunctions)\n      .combine('offset', [false, true] as const)\n  )\n  .fn(async t => {\n    const { format, stage, samplePoints, addressModeU, addressModeV, minFilter, compare, offset } =\n      t.params;\n\n    const size = chooseTextureSize({ minSize: 16, minBlocks: 4, format });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n      mipLevelCount: 3,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor, {\n      generator: makeRandomDepthComparisonTexelGenerator(descriptor, compare),\n    });\n    const sampler: GPUSamplerDescriptor = {\n      addressModeU,\n      addressModeV,\n      compare,\n      minFilter,\n      magFilter: minFilter,\n      mipmapFilter: minFilter,\n    };\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      textureBuiltin: 'textureSampleCompareLevel',\n      sampler,\n      descriptor,\n      derivatives: true,\n      depthRef: true,\n      offset,\n      hashInputs: [stage, format, samplePoints, addressModeU, addressModeV, minFilter, offset],\n    }).map(({ coords, derivativeMult, arrayIndex, depthRef, offset }) => {\n      return {\n        builtin: 'textureSampleCompareLevel',\n        coordType: 'f',\n        coords,\n        derivativeMult,\n        depthRef,\n        offset,\n      };\n    });\n    const textureType = 'texture_depth_2d';\n    const viewDescriptor = {};\n    const results = await doTextureCalls(\n      t,\n      texture,\n      viewDescriptor,\n      textureType,\n      sampler,\n      calls,\n      stage\n    );\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results,\n      stage\n    );\n    t.expectOK(res);\n  });\n\ng.test('3d_coords')\n  .specURL('https://www.w3.org/TR/WGSL/#texturesamplecomparelevel')\n  .desc(\n    `\nfn textureSampleCompareLevel(t: texture_depth_cube, s: sampler_comparison, coords: vec3<f32>, depth_ref: f32) -> f32\n\nParameters:\n * t  The depth texture to sample.\n * s  The sampler_comparison type.\n * coords The texture coordinates used for sampling.\n * depth_ref The reference value to compare the sampled depth value against.\n`\n  )\n  .params(u =>\n    u\n      .combine('stage', kShaderStages)\n      .combine('format', kDepthStencilFormats)\n      // filter out stencil only formats\n      .filter(t => isDepthTextureFormat(t.format))\n      // MAINTENANCE_TODO: Remove when support for depth24plus, depth24plus-stencil8, and depth32float-stencil8 is added.\n      .filter(t => isEncodableTextureFormat(t.format))\n      .combine('minFilter', ['nearest', 'linear'] as const)\n      .beginSubcases()\n      .combine('samplePoints', kCubeSamplePointMethods)\n      .combine('addressMode', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('compare', kCompareFunctions)\n  )\n  .fn(async t => {\n    const { format, stage, samplePoints, addressMode, minFilter, compare } = t.params;\n\n    const viewDimension: GPUTextureViewDimension = 'cube';\n    const size = chooseTextureSize({ minSize: 16, minBlocks: 2, format, viewDimension });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      ...(t.isCompatibility && { textureBindingViewDimension: viewDimension }),\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n      // MAINTENANCE_TODO: change to 3\n      mipLevelCount: 1,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor, {\n      generator: makeRandomDepthComparisonTexelGenerator(descriptor, compare),\n    });\n    const sampler: GPUSamplerDescriptor = {\n      addressModeU: addressMode,\n      addressModeV: addressMode,\n      addressModeW: addressMode,\n      compare,\n      minFilter,\n      magFilter: minFilter,\n      mipmapFilter: minFilter,\n    };\n\n    const calls: TextureCall<vec3>[] = generateSamplePointsCube(50, {\n      method: samplePoints,\n      sampler,\n      descriptor,\n      derivatives: true,\n      depthRef: true,\n      textureBuiltin: 'textureSampleCompareLevel',\n      hashInputs: [stage, format, samplePoints, addressMode, minFilter, compare],\n    }).map(({ coords, derivativeMult, depthRef }) => {\n      return {\n        builtin: 'textureSampleCompareLevel',\n        coordType: 'f',\n        coords,\n        derivativeMult,\n        depthRef,\n      };\n    });\n    const viewDescriptor = {\n      dimension: viewDimension,\n    };\n    const textureType = 'texture_depth_cube';\n    const results = await doTextureCalls(\n      t,\n      texture,\n      viewDescriptor,\n      textureType,\n      sampler,\n      calls,\n      stage\n    );\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results,\n      stage\n    );\n    t.expectOK(res);\n  });\n\ng.test('arrayed_2d_coords')\n  .specURL('https://www.w3.org/TR/WGSL/#texturesamplecomparelevel')\n  .desc(\n    `\nA is i32 or u32\n\nfn textureSampleCompareLevel(t: texture_depth_2d_array, s: sampler_comparison, coords: vec2<f32>, array_index: A, depth_ref: f32) -> f32\nfn textureSampleCompareLevel(t: texture_depth_2d_array, s: sampler_comparison, coords: vec2<f32>, array_index: A, depth_ref: f32, offset: vec2<i32>) -> f32\n\nParameters:\n * t  The depth texture to sample.\n * s  The sampler_comparison type.\n * coords The texture coordinates used for sampling.\n * array_index: The 0-based texture array index to sample.\n * depth_ref The reference value to compare the sampled depth value against.\n * offset\n    * The optional texel offset applied to the unnormalized texture coordinate before sampling the texture.\n    * This offset is applied before applying any texture wrapping modes.\n    * The offset expression must be a creation-time expression (e.g. vec2<i32>(1, 2)).\n    * Each offset component must be at least -8 and at most 7.\n      Values outside of this range will result in a shader-creation error.\n`\n  )\n  .params(u =>\n    u\n      .combine('stage', kShaderStages)\n      .combine('format', kDepthStencilFormats)\n      // filter out stencil only formats\n      .filter(t => isDepthTextureFormat(t.format))\n      // MAINTENANCE_TODO: Remove when support for depth24plus, depth24plus-stencil8, and depth32float-stencil8 is added.\n      .filter(t => isEncodableTextureFormat(t.format))\n      .combine('minFilter', ['nearest', 'linear'] as const)\n      .beginSubcases()\n      .combine('samplePoints', kSamplePointMethods)\n      .combine('A', ['i32', 'u32'] as const)\n      .combine('addressModeU', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('addressModeV', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('compare', kCompareFunctions)\n      .combine('offset', [false, true] as const)\n  )\n  .beforeAllSubcases(t => {\n    t.skipIfTextureFormatNotSupported(t.params.format);\n  })\n  .fn(async t => {\n    const {\n      format,\n      stage,\n      samplePoints,\n      A,\n      addressModeU,\n      addressModeV,\n      minFilter,\n      compare,\n      offset,\n    } = t.params;\n\n    const viewDimension = '2d-array';\n    const size = chooseTextureSize({ minSize: 16, minBlocks: 4, format, viewDimension });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n      mipLevelCount: 3,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor, {\n      generator: makeRandomDepthComparisonTexelGenerator(descriptor, compare),\n    });\n    const sampler: GPUSamplerDescriptor = {\n      addressModeU,\n      addressModeV,\n      compare,\n      minFilter,\n      magFilter: minFilter,\n      mipmapFilter: minFilter,\n    };\n\n    const calls: TextureCall<vec2>[] = generateTextureBuiltinInputs2D(50, {\n      method: samplePoints,\n      textureBuiltin: 'textureSampleCompareLevel',\n      sampler,\n      descriptor,\n      derivatives: true,\n      arrayIndex: { num: texture.depthOrArrayLayers, type: A },\n      depthRef: true,\n      offset,\n      hashInputs: [stage, format, samplePoints, A, addressModeU, addressModeV, minFilter, offset],\n    }).map(({ coords, derivativeMult, arrayIndex, depthRef, offset }) => {\n      return {\n        builtin: 'textureSampleCompareLevel',\n        coordType: 'f',\n        coords,\n        derivativeMult,\n        arrayIndex,\n        arrayIndexType: A === 'i32' ? 'i' : 'u',\n        depthRef,\n        offset,\n      };\n    });\n    const textureType = 'texture_depth_2d_array';\n    const viewDescriptor = {};\n    const results = await doTextureCalls(\n      t,\n      texture,\n      viewDescriptor,\n      textureType,\n      sampler,\n      calls,\n      stage\n    );\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results,\n      stage\n    );\n    t.expectOK(res);\n  });\n\ng.test('arrayed_3d_coords')\n  .specURL('https://www.w3.org/TR/WGSL/#texturesamplecomparelevel')\n  .desc(\n    `\nA is i32 or u32\n\nfn textureSampleCompareLevel(t: texture_depth_cube_array, s: sampler_comparison, coords: vec3<f32>, array_index: A, depth_ref: f32) -> f32\n\nParameters:\n * t  The depth texture to sample.\n * s  The sampler_comparison type.\n * coords The texture coordinates used for sampling.\n * array_index: The 0-based texture array index to sample.\n * depth_ref The reference value to compare the sampled depth value against.\n`\n  )\n  .params(u =>\n    u\n      .combine('stage', kShaderStages)\n      .combine('format', kDepthStencilFormats)\n      // filter out stencil only formats\n      .filter(t => isDepthTextureFormat(t.format))\n      // MAINTENANCE_TODO: Remove when support for depth24plus, depth24plus-stencil8, and depth32float-stencil8 is added.\n      .filter(t => isEncodableTextureFormat(t.format))\n      .combine('minFilter', ['nearest', 'linear'] as const)\n      .beginSubcases()\n      .combine('samplePoints', kCubeSamplePointMethods)\n      .combine('A', ['i32', 'u32'] as const)\n      .combine('addressMode', ['clamp-to-edge', 'repeat', 'mirror-repeat'] as const)\n      .combine('compare', kCompareFunctions)\n  )\n  .beforeAllSubcases(t => {\n    t.skipIfTextureViewDimensionNotSupported('cube-array');\n  })\n  .fn(async t => {\n    const { format, A, stage, samplePoints, addressMode, minFilter, compare } = t.params;\n\n    const viewDimension: GPUTextureViewDimension = 'cube-array';\n    const size = chooseTextureSize({ minSize: 8, minBlocks: 2, format, viewDimension });\n\n    const descriptor: GPUTextureDescriptor = {\n      format,\n      ...(t.isCompatibility && { textureBindingViewDimension: viewDimension }),\n      size,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING,\n    };\n    const { texels, texture } = await createTextureWithRandomDataAndGetTexels(t, descriptor, {\n      generator: makeRandomDepthComparisonTexelGenerator(descriptor, compare),\n    });\n    const sampler: GPUSamplerDescriptor = {\n      addressModeU: addressMode,\n      addressModeV: addressMode,\n      addressModeW: addressMode,\n      compare,\n      minFilter,\n      magFilter: minFilter,\n      mipmapFilter: minFilter,\n    };\n\n    const calls: TextureCall<vec3>[] = generateSamplePointsCube(50, {\n      method: samplePoints,\n      sampler,\n      descriptor,\n      derivatives: true,\n      textureBuiltin: 'textureSampleCompareLevel',\n      arrayIndex: { num: texture.depthOrArrayLayers / 6, type: A },\n      depthRef: true,\n      hashInputs: [stage, format, samplePoints, addressMode, minFilter],\n    }).map(({ coords, derivativeMult, depthRef, arrayIndex }) => {\n      return {\n        builtin: 'textureSampleCompareLevel',\n        arrayIndex,\n        arrayIndexType: A === 'i32' ? 'i' : 'u',\n        coordType: 'f',\n        coords,\n        derivativeMult,\n        depthRef,\n      };\n    });\n    const viewDescriptor = {\n      dimension: viewDimension,\n    };\n    const textureType = 'texture_depth_cube_array';\n    const results = await doTextureCalls(\n      t,\n      texture,\n      viewDescriptor,\n      textureType,\n      sampler,\n      calls,\n      stage\n    );\n    const res = await checkCallResults(\n      t,\n      { texels, descriptor, viewDescriptor },\n      textureType,\n      sampler,\n      calls,\n      results,\n      stage\n    );\n    t.expectOK(res);\n  });\n"],"mappings":"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"}